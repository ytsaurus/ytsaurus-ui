{
    "panels": [
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "<h2>Resources</h2>",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 1,
                "w": 24,
                "h": 2
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 3
            },
            "type": "row"
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_usage_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_demand_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Resource demand"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_effective_strong_guarantee_resources_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Effective guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_strong_guarantee_resources_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "D",
                    "legendFormat": "Configured guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_specified_resource_limits_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "E",
                    "legendFormat": "Configured limit"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Cores",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "D"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "E"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "CPU",
            "gridPos": {
                "x": 0,
                "y": 4,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_usage_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_demand_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Resource demand"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_effective_strong_guarantee_resources_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Effective guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_strong_guarantee_resources_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "D",
                    "legendFormat": "Configured guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_specified_resource_limits_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "E",
                    "legendFormat": "Configured limit"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Bytes",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "bytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "bytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "bytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "D"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "bytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "E"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "bytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Memory",
            "gridPos": {
                "x": 8,
                "y": 4,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_usage_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_demand_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Resource demand"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_effective_strong_guarantee_resources_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Effective guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_strong_guarantee_resources_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "D",
                    "legendFormat": "Configured guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_specified_resource_limits_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "E",
                    "legendFormat": "Configured limit"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "GPUs",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "D"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "E"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "GPU",
            "gridPos": {
                "x": 16,
                "y": 4,
                "w": 8,
                "h": 6
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 10
            },
            "type": "row"
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_running_operation_count\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_lightweight_running_operation_count\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Lightweight usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_max_running_operation_count\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Limit"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Operations",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Running Operations",
            "gridPos": {
                "x": 0,
                "y": 11,
                "w": 12,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_total_operation_count\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Usage"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_max_operation_count\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Limit"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Operations",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Total Operations",
            "gridPos": {
                "x": 12,
                "y": 11,
                "w": 12,
                "h": 6
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 17
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "**Demand**: amount of resources needed to run all waiting and running jobs in the pool.<br>\n**Usage**: model resource consumption of the pool from scheduler's point of view. Represents the number of resources that are reserved for operations in the pool. Actual resource consumption may differ.<br>\n**Configured Guarantee**: amount of resources guaranteed for the pool that is specified in pool's config.<br>\n**Effective Guarantee**: amount of resources guaranteed for the pool that is derived from **Configured Guarantee**. In case of cluster resources shortage, **Effective Guarantee** can be lower than **Configured Guarantee**.<br>\n**Configured Limit**: maximum amount of resources given to the pool that is specified in pool's config.\n\n**Running Operations**: number of operations in the pool which are running, i.e. are considered for job scheduling. Also displays the number of \"lightweight\" running operations, which are not accounted in the running operation count limit.<br>\n**Total Operations**: total number of operations in the pool, includes \"Running operation count\". The difference between Total Operations and Running Operations is the size of the queue of operations that are waiting to be started.\n\n\nYou can learn more about quotas in the [documentation](https://ytsaurus.tech/docs/en/user-guide/storage/quotas).",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 18,
                "w": 24,
                "h": 9
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 27
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "<h2>Detailed Resource Distribution</h2>",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 28,
                "w": 24,
                "h": 2
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 30
            },
            "type": "row"
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_usage_share\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Dominant usage share"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_demand_share\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Dominant demand share"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_fair_share_total\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Dominant fair share"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Cluster share",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Dominant Shares",
            "gridPos": {
                "x": 0,
                "y": 31,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_fair_share_total_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "CPU"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_fair_share_total_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Memory"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_fair_share_total_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "GPU"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Cluster share",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Fair Share per Resource",
            "gridPos": {
                "x": 8,
                "y": 31,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_fair_share_strong_guarantee\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Strong guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_fair_share_integral_guarantee\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "B",
                    "legendFormat": "Integral guarantee"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_dominant_fair_share_weight_proportional\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Weight proportional"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "stacking": {
                            "group": "A",
                            "mode": "normal"
                        },
                        "fillOpacity": 100,
                        "axisLabel": "Cluster share",
                        "hideFrom": {
                            "legend": false
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Dominant Fair Share per Type",
            "gridPos": {
                "x": 16,
                "y": 31,
                "w": 8,
                "h": 6
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 37
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "**Usage**, **Demand**, **Fair share**: share of the cluster that is used, demanded or should be given to the pool. For example, 1.0 or 100% corresponds to the total amount of resources in the cluster.<br>\n**Fair Share** can be split into three parts: strong guarantee, integral guarantee and free resources, which are distributed between pools in proportion to their weights.<br>",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 38,
                "w": 24,
                "h": 3
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 41
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "<h2>Job Metrics</h2>",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 42,
                "w": 24,
                "h": 2
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 44
            },
            "type": "row"
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_user_job_io_total\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "A",
                    "legendFormat": "User job IO rate"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "IO operations/sec"
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "iops"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Local Disk IO",
            "gridPos": {
                "x": 0,
                "y": 45,
                "w": 6,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_user_job_cpu_system\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "A",
                    "legendFormat": "User job system"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_user_job_cpu_user\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "B",
                    "legendFormat": "User job user"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_job_proxy_cpu_system\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "C",
                    "legendFormat": "Job proxy system"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_job_proxy_cpu_user\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "D",
                    "legendFormat": "Job proxy user"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "stacking": {
                            "group": "A",
                            "mode": "normal"
                        },
                        "fillOpacity": 100,
                        "axisLabel": "Cores"
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "D"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "CPU",
            "gridPos": {
                "x": 6,
                "y": 45,
                "w": 6,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_user_job_memory_mb\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "A",
                    "legendFormat": "User job memory"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_job_proxy_memory_mb\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval])",
                    "refId": "B",
                    "legendFormat": "Job proxy memory"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "stacking": {
                            "group": "A",
                            "mode": "normal"
                        },
                        "fillOpacity": 100
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "mbytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "unit",
                                "value": "mbytes"
                            },
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Memory",
            "gridPos": {
                "x": 12,
                "y": 45,
                "w": 6,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_gpu_load\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval]) / 1000.0",
                    "refId": "A",
                    "legendFormat": "Load"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "rate({cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_metrics_gpu_utilization_gpu\", pool=~\"$pool\", tree=~\"$tree\"}[$__rate_interval]) / 1000.0",
                    "refId": "B",
                    "legendFormat": "Utilization"
                },
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_resource_usage_gpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "C",
                    "legendFormat": "Usage"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Sum of device fractions"
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "B"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "C"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "GPU",
            "gridPos": {
                "x": 18,
                "y": 45,
                "w": 6,
                "h": 6
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 51
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "**Local Disk IO**: total amount of I/O operations per second (IOPS) of all user jobs in the pool.<br>\n**CPU**: total detailed CPU usage statistics of all user jobs and their job proxies in the pool.<br>\n**Memory**: total detailed RAM usage of user job and job proxy.<br>\n**GPU**: total detailed GPU utilization statistics of all user jobs in the pool.\n\nConsult [documentation](https://ytsaurus.tech/docs/en/user-guide/problems/jobstatistics) for more information on the corresponding job statistics.",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 52,
                "w": 24,
                "h": 5
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 57
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "<h2>Integral guarantees</h2>",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 58,
                "w": 24,
                "h": 2
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 60
            },
            "type": "row"
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_accumulated_resource_volume_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Accumulated CPU volume"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "CPU * secs",
                        "hideFrom": {
                            "legend": true
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Accumulated Resource Volume: CPU",
            "gridPos": {
                "x": 0,
                "y": 61,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_accumulated_resource_volume_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Accumulated memory volume"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Bytes * secs",
                        "hideFrom": {
                            "legend": true
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Accumulated Resource Volume: Memory",
            "gridPos": {
                "x": 8,
                "y": 61,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_accumulated_volume_dominant_share\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Accumulated dominant resource share"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Cluster share * secs",
                        "hideFrom": {
                            "legend": true
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Accumulated resource volume share",
            "gridPos": {
                "x": 16,
                "y": 61,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_accepted_free_volume_cpu\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Accepted free CPU volume"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "CPU * secs",
                        "hideFrom": {
                            "legend": true
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Accepted Free Volume: CPU",
            "gridPos": {
                "x": 4,
                "y": 67,
                "w": 8,
                "h": 6
            }
        },
        {
            "datasource": {
                "type": "prometheus",
                "uid": "${PROMETHEUS_DS_UID}"
            },
            "type": "timeseries",
            "targets": [
                {
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${PROMETHEUS_DS_UID}"
                    },
                    "expr": "{cluster=~\"$cluster\", service=~\"yt-scheduler\", __name__=~\"yt_scheduler_pools_accepted_free_volume_user_memory\", pool=~\"$pool\", tree=~\"$tree\"}",
                    "refId": "A",
                    "legendFormat": "Accepted free memory volume"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "axisLabel": "Memory * secs",
                        "hideFrom": {
                            "legend": true
                        }
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "min",
                                "value": 0
                            }
                        ]
                    }
                ]
            },
            "title": "Accepted Free Volume: Memory",
            "gridPos": {
                "x": 12,
                "y": 67,
                "w": 8,
                "h": 6
            }
        },
        {
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 73
            },
            "type": "row"
        },
        {
            "type": "text",
            "options": {
                "content": "The following metrics are only relevant for pools with burst or relaxed integral guarantees.\n\n**Accumulated Resource Volume Share**: amount of virtual resources accumulated in the pool which can be spent on integral guarantees.<br>\n**Accumulated Resource Volume (CPU/Memory)**: approximate amount of accumulated resources computed based on accumulated volume share and the current total resource amount in the cluster.<br>\n**Accepted Free Volume (CPU/Memory)**: virtual resource volume which was obtained by the pool via redistribution of other pools' unused integral resource flows.\n\nConsult [documentation](https://ytsaurus.tech/docs/en/user-guide/data-processing/scheduler/integral-guarantees) for more information on intergral guarantees.",
                "mode": "markdown"
            },
            "title": "",
            "gridPos": {
                "x": 0,
                "y": 74,
                "w": 24,
                "h": 6
            }
        }
    ],
    "title": "Scheduler pool [Autogenerated]",
    "tags": [
        "YT",
        "autogen"
    ],
    "templating": {
        "list": [
            {
                "name": "cluster",
                "label": "Cluster",
                "type": "textbox",
                "options": [
                    {
                        "selected": true,
                        "text": ".*",
                        "value": ".*"
                    }
                ],
                "current": {
                    "selected": true,
                    "text": ".*",
                    "value": ".*"
                },
                "query": ".*",
                "hide": 0,
                "skipUrlSync": false,
                "allFormat": "glob"
            },
            {
                "name": "tree",
                "label": "Tree",
                "type": "textbox",
                "options": [
                    {
                        "selected": true,
                        "text": "default",
                        "value": "default"
                    }
                ],
                "current": {
                    "selected": true,
                    "text": "default",
                    "value": "default"
                },
                "query": "default",
                "hide": 0,
                "skipUrlSync": false,
                "allFormat": "glob"
            },
            {
                "name": "pool",
                "label": "Pool",
                "type": "textbox",
                "options": [
                    {
                        "selected": true,
                        "text": "<Root>",
                        "value": "<Root>"
                    }
                ],
                "current": {
                    "selected": true,
                    "text": "<Root>",
                    "value": "<Root>"
                },
                "query": "<Root>",
                "hide": 0,
                "skipUrlSync": false,
                "allFormat": "glob"
            }
        ],
        "permissions": [
            {
                "permission": "use",
                "path": "//sys/pool_trees/$tree/$pool",
                "cluster": "$cluster",
                "ignorePaths": [
                    "//sys/pool_trees/$pool/<Root>"
                ]
            },
            {
                "permission": "use",
                "path": "//sys/pool_trees/$tree",
                "cluster": "$cluster"
            }
        ]
    },
    "uid": "ytsaurus-scheduler-pool"
}